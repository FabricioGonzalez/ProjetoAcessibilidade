<UserControl
    x:Class="AppWinui.AppCode.Project.UIComponents.TabView.ProjectEditingTabViewItem"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:templateselector="using:AppWinui.AppCode.Project.UITemplates.TemplateSelector" 
    xmlns:datatemplates="using:AppWinui.AppCode.Project.UITemplates.DataTemplates"
    mc:Ignorable="d"
    x:Name="tabItem"
    Loaded="ProjectEditingTabViewItem_Loaded">

    <ScrollViewer
		x:Name="Scroller"
		BorderThickness="1"
		CornerRadius="8"
		Shadow="{StaticResource CommandBarFlyoutOverflowShadow}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition />
            </Grid.RowDefinitions>

            <Grid Grid.Row="1">
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <ListView
					Grid.Row="0"
					ItemsSource="{x:Bind ViewModel.Project.FormData}"
					SelectionMode="None">
                    <ListView.ItemTemplateSelector>
                        <templateselector:ProjectItemTemplateSelector>
                            <templateselector:ProjectItemTemplateSelector.CheckBoxTemplate>
                                <DataTemplate>
                                    <datatemplates:CheckboxDataTemplate/>
                                </DataTemplate>
                            </templateselector:ProjectItemTemplateSelector.CheckBoxTemplate>
                            <templateselector:ProjectItemTemplateSelector.TextBoxTemplate>
                                <DataTemplate>
                                    <datatemplates:TextboxDataTemplate/>
                                </DataTemplate>
                            </templateselector:ProjectItemTemplateSelector.TextBoxTemplate>
                            <templateselector:ProjectItemTemplateSelector.ObservationTemplate>
                                <DataTemplate>
                                    <datatemplates:ObservationDataTemplate/>
                                </DataTemplate>
                            </templateselector:ProjectItemTemplateSelector.ObservationTemplate>
                        </templateselector:ProjectItemTemplateSelector>
                    </ListView.ItemTemplateSelector>
                </ListView>
                <ListView
					Grid.Row="1"
					ItemsSource="{x:Bind ViewModel.Project.LawList}"
					SelectionMode="None">
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <StackPanel
								Margin="0,4"
								Padding="8"
								BorderBrush="#20888888"
								BorderThickness="1"
								CornerRadius="8">
                                <TextBlock FontWeight="Bold" Text="{Binding LawId}" />
                                <TextBlock Text="{Binding LawTextContent, Converter={StaticResource EnumerableToString}}" TextWrapping="Wrap" />
                            </StackPanel>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </Grid>
            <StackPanel x:Name="ScrollerHeader">
                <CommandBar x:Name="commandBar" Background="{ThemeResource PrimaryAcrylicBrush}">
                    <AppBarButton
						Command="{x:Bind ViewModel.SaveProjectItemCommand}"
						Icon="Save"
						Label="Save"
						ToolTipService.ToolTip="Save">
                        <AppBarButton.KeyboardAccelerators>
                            <KeyboardAccelerator Key="S" Modifiers="Control" />
                        </AppBarButton.KeyboardAccelerators>
                    </AppBarButton>
                    <AppBarButton Icon="Add" Label="Add Image">
                        <AppBarButton.KeyboardAccelerators>
                            <KeyboardAccelerator Key="A" Modifiers="Control" />
                        </AppBarButton.KeyboardAccelerators>
                    </AppBarButton>
                    <CommandBar.Content>
                        <TextBlock
							Margin="64,8"
							FontWeight="Bold"
							Text="{x:Bind ViewModel.Project.ItemName}" />
                    </CommandBar.Content>
                </CommandBar>

            </StackPanel>
        </Grid>
    </ScrollViewer>
</UserControl>
